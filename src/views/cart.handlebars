<!-- BEGIN: Main Menu-->
    <div class="main-menu menu-fixed menu-dark menu-accordion menu-shadow" data-scroll-to-active="true">
        <div class="navbar-header">
            <ul class="nav navbar-nav flex-row">
                <li class="nav-item me-auto">
                    <a class="navbar-brand" href="/">
                        <span class="brand-logo">
                            <svg viewbox="0 0 139 95" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="24">
                                <defs>
                                    <lineargradient id="linearGradient-1" x1="100%" y1="10.5120544%" x2="50%" y2="89.4879456%">
                                        <stop stop-color="#000000" offset="0%"></stop>
                                        <stop stop-color="#FFFFFF" offset="100%"></stop>
                                    </lineargradient>
                                    <lineargradient id="linearGradient-2" x1="64.0437835%" y1="46.3276743%" x2="37.373316%" y2="100%">
                                        <stop stop-color="#EEEEEE" stop-opacity="0" offset="0%"></stop>
                                            <stop stop-color="#FFFFFF" offset="100%"></stop>
                                    </lineargradient>
                                </defs>
                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Artboard" transform="translate(-400.000000, -178.000000)">
                                        <g id="Group" transform="translate(400.000000, 178.000000)">
                                            <path class="text-primary" id="Path" d="M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z" style="fill:currentColor"></path>
                                            <path id="Path1" d="M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z" fill="url(#linearGradient-1)" opacity="0.2"></path>
                                            <polygon id="Path-2" fill="#000000" opacity="0.049999997" points="69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"></polygon>
                                            <polygon id="Path-21" fill="#000000" opacity="0.099999994" points="69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"></polygon>
                                            <polygon id="Path-3" fill="url(#linearGradient-2)" opacity="0.099999994" points="101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"></polygon>
                                        </g>
                                    </g>
                                </g>
                            </svg>
                        </span>
                        <h2 class="brand-text">7 Rayos</h2>
                    </a>
                </li>
                <li class="nav-item nav-toggle">
                    <a class="nav-link modern-nav-toggle pe-0" data-bs-toggle="collapse">
                        <i class="d-block d-xl-none text-primary toggle-icon font-medium-4" data-feather="x"></i>
                        <i class="d-none d-xl-block collapse-toggle-icon font-medium-4  text-primary" data-feather="disc" data-ticon="disc"></i>
                    </a>
                </li>   
            </ul>
        </div>
        <div class="shadow-bottom"></div>
        <div class="main-menu-content">
            <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/">
                        <i data-feather='zap'></i>
                        <span class="menu-title text-truncate" >Home</span>
                    </a>
                    <ul class="menu-content">
                        <li>
                            <a class="d-flex align-items-center" href="#">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >¿quiénes somos?</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="#">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >¿para qué?</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="#">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >¿cómo?</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class=" navigation-header">
                    <span data-i18n="Apps &amp; Pages">Hierbas</span>
                    <i data-feather="more-horizontal"></i>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="#">
                        <i data-feather='feather'></i>
                        <span class="menu-title text-truncate" >Medicinales</span>
                    </a>
                    <ul class="menu-content">
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Aceites esenciales</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Brumas</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Sáhumos</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="#">
                        <i data-feather='codepen'></i>
                        <span class="menu-title text-truncate" >Aromáticas</span>
                    </a>
                    <ul class="menu-content">
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Aceites esenciales</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Brumas</span>
                            </a>
                        </li>
                        <li>
                            <a class="d-flex align-items-center" href="/products">
                                <i data-feather='corner-down-right'></i>
                                <span class="menu-item text-truncate" >Sáhumos</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class=" navigation-header">
                    <span data-i18n="Apps &amp; Pages">Productos</span>
                    <i data-feather="more-horizontal"></i>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/products">     <!-- Aquí va filtro por categoría -->
                        <i data-feather='droplet'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Aceites esenciales</span>
                    </a>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/products">     <!-- Aquí va filtro por categoría -->
                        <i data-feather='activity'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Brumas</span>
                    </a>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/products">     <!-- Aquí va filtro por categoría -->
                        <i data-feather='loader'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Sáhumos</span>
                    </a>
                </li>
                <li class=" navigation-header">
                    <span data-i18n="Apps &amp; Pages">Club 7 Rayos</span>
                    <i data-feather="more-horizontal"></i>
                </li>
                {{#if user.role}}
                {{#ifEqual user.role "admin"}}
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/admin-panel">
                        <i data-feather='award'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Panel Administrador</span>
                    </a>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/docs-api">
                        <i data-feather="folder"></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Documentation</span>
                    </a>
                </li>
                {{/ifEqual}}
                {{/if}}
                {{#if user}}
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/user/profile/documents">
                        <i data-feather='gift'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Beneficios</span>
                    </a>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/logout">
                        <i data-feather='log-out'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Logout</span>
                    </a>
                </li>
                {{else}}
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/auth/register">
                        <i data-feather='user-plus'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Registrate</span>
                    </a>
                </li>
                <li class=" nav-item">
                    <a class="d-flex align-items-center" href="/auth/login">
                        <i data-feather='log-in'></i>
                        <span class="menu-title text-truncate" data-i18n="Typography">Login</span>
                    </a>
                </li>
                {{/if}}
            </ul>
        </div>
    </div>
    <!-- END: Main Menu-->

<div class="container">
    <h1>Carrito de Compras de </h1>
    <h1>{{user.first_name}} {{user.last_name}} {{user.user.first_name}}</h1>
    {{#if user.premium}}
    <h1 class="premium-h1">Usted tiene un 20% de Descuento!</h1>
    {{/if}}

    <table class="table">
        <thead>
            <tr class="totalPrice">
                <th>Producto</th>
                <th>Precio
                    <form action="/cart" method="get" id="sortForm">
                        <select name="sortOption" onchange="document.getElementById('sortForm').submit()">
                            <option value="">Filtrar</option>
                            <option value="asc">Menor Precio</option>
                            <option value="desc">Mayor Precio</option>
                        </select>
                        <input type="hidden" name="sort" value="{{ sortOption }}">
                    </form>
                </th>
                <th>Imagen</th>
                <th>Cantidad</th>
                <th>Total</th>
                <th>Eliminar</th>
            </tr>
        </thead>


        <tbody>
            {{#each cart.items as |item|}}
            <tr class="white">
                <td>{{ item.producto.title }}</td>
                <td>${{ item.producto.price }}.-</td>
                <td class="ImgTable">
                    <img src="{{ item.producto.thumbnail }}" alt="{{ item.producto.title }}">
                </td>
                <td>
                    <form method="POST" action="/cart/{{ ../cid }}/{{item._id}}?_method=PUT"
                        style="display: flex; justify-content: space-evenly;" class="input-con-botones">
                        <input type="hidden" name="cid" value="{{ cid }}">
                        <input type="number" value="{{ item.cantidad }}" class="form-control input-width"
                            name="cantidad" min="1" max="{{ item.producto.stock }}" style="max-height: 2rem;">
                        <button type="submit" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-check-lg" viewBox="0 0 16 16">
                                <path
                                    d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
                            </svg>
                        </button>
                    </form>

                </td>
                <td>${{ multiply item.producto.price item.cantidad }}.-</td>
                <td>
                    <a href="/notifications/deleted-cart/{{ ../cid }}/{{ item._id }}"
                        class="btn btn-danger input-con-botones enlaces">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            class="bi bi-cart-x" viewBox="0 0 16 16">

                            <path
                                d="M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0 .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5 0 0 0-.708-.708L8.5 6.793 7.354 5.646z" />
                            <path
                                d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                        </svg></a>
                </td>
                </td>
            </tr>
            {{/each}}
            {{#if userIsPremium}}
            <div class="apply-discount">
                <h1>20% de Descuento Aplicado.!!</h1>
            </div>
            {{/if}}
            <tr class="totalPrice">
                {{#if user.premium}}
                <td colspan="6">
                    {{#with totalPrice}}
                    TOTAL: ${{this}}.- <br>(20% de Descuento Aplicado)
                    {{/with}}
                </td>
                {{else}}
                <td colspan="6">
                    {{#with totalPrice}}
                    TOTAL: ${{this}}.-
                    {{/with}}
                </td>
                {{/if}}
            </tr>

        </tbody>


    </table>


    <div class="input-group group-comprar">
        <button type="submit" class="btn btn-success" id="comprar-carro">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-check"
                viewBox="0 0 16 16">
                <path
                    d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                <path
                    d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
            </svg>
            Comprar Carrito</button>
    </div>


    <form method="POST" action="/cart/{{ cid }}/vaciar" id="emptyCartForm">
        <input type="hidden" name="cid" value="{{ cid }}">
        <div class="input-group group-comprar">
            <button type="submit" class="btn btn-secondary" id="vaciar-carro">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-x"
                    viewBox="0 0 16 16">
                    <path
                        d="M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0 .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5 0 0 0-.708-.708L8.5 6.793 7.354 5.646z" />
                    <path
                        d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                </svg>
                Vaciar Carrito</button>
        </div>
    </form>

    <form action="/cart/{{ cid }}/eliminar" method="POST">
        <input type="hidden" name="cid" value="{{ cid }}">
        <div class="input-group group-comprar">
            <button type="submit" class="btn btn-danger" id="eliminar-carro">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart-x"
                    viewBox="0 0 16 16">
                    <path
                        d="M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0 .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5 0 0 0-.708-.708L8.5 6.793 7.354 5.646z" />
                    <path
                        d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                </svg>
                Eliminar Carrito</button>
        </div>
    </form>
    <section id="checkout-section" class="hidden">
        <h1 class="premium-h1">Checkout</h1>
        <div class="card-container">
            <div class="card">
                <div class="card-front">
                    <div class="visacard">
                        <svg xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 576 512">
                            <style>
                                svg {
                                    fill: #ffffff
                                }
                            </style>
                            <path
                                d="M470.1 231.3s7.6 37.2 9.3 45H446c3.3-8.9 16-43.5 16-43.5-.2.3 3.3-9.1 5.3-14.9l2.8 13.4zM576 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48zM152.5 331.2L215.7 176h-42.5l-39.3 106-4.3-21.5-14-71.4c-2.3-9.9-9.4-12.7-18.2-13.1H32.7l-.7 3.1c15.8 4 29.9 9.8 42.2 17.1l35.8 135h42.5zm94.4.2L272.1 176h-40.2l-25.1 155.4h40.1zm139.9-50.8c.2-17.7-10.6-31.2-33.7-42.3-14.1-7.1-22.7-11.9-22.7-19.2.2-6.6 7.3-13.4 23.1-13.4 13.1-.3 22.7 2.8 29.9 5.9l3.6 1.7 5.5-33.6c-7.9-3.1-20.5-6.6-36-6.6-39.7 0-67.6 21.2-67.8 51.4-.3 22.3 20 34.7 35.2 42.2 15.5 7.6 20.8 12.6 20.8 19.3-.2 10.4-12.6 15.2-24.1 15.2-16 0-24.6-2.5-37.7-8.3l-5.3-2.5-5.6 34.9c9.4 4.3 26.8 8.1 44.8 8.3 42.2.1 69.7-20.8 70-53zM528 331.4L495.6 176h-31.1c-9.6 0-16.9 2.8-21 12.9l-59.7 142.5H426s6.9-19.2 8.4-23.3H486c1.2 5.5 4.8 23.3 4.8 23.3H528z" />
                        </svg>
                    </div>
                    <label for="">Numero de Tarjeta</label>
                    <div class="card-number" id="display-card-number"></div>
                    <label for="">Nombre y Apellido del Titular</label>
                    <div class="card-name" id="display-card-name"> </div>
                    <label for="">Fecha de Expiración</label>
                    <div class="card-expiration" id="display-card-expiration">MM/AA</div>
                </div>
                <div class="card-back">
                    <label for="">Código de Seguridad</label>
                    <div class="card-cvv" id="display-card-cvv">CVV</div>
                </div>
            </div>
            <div class="card-form">
                <input type="number" class="form-control mb-2" placeholder="Número de tarjeta" id="card-number"
                    name="cardNumber" min="0" max="9999999999999999" required>
                <input type="text" class="form-control mb-2" placeholder="Nombre y Apellido del Titular" id="card-name"
                    name="cardName" required>
                <input type="number" class="form-control mb-2" placeholder="MM/AA" id="card-expiration"
                    name="cardExpiration" min="0" max="1300" required>
                <input type="number" class="form-control mb-2" placeholder="Código de Seguridad" id="card-cvv"
                    name="cardCvv" min="0" max="999" required>
                <form action="/checkout" method="post">
                    <input type="hidden" name="cid" value="{{ cid }}">
                    <div class="input-group group-comprar">
                        <button type="submit" class="btn btn-success" id="pagar-carro" disabled>Pagar</button>
                    </div>
                </form>
            </div>
        </div>


    </section>
</div>

<script src="/assets/js/checkout.js"></script>